@import "../../../theme/colors.scss";

.filters-content {
  --background: linear-gradient(135deg, $primary 0%, $secondary 100%);

  .centered-page {
    max-width: 1400px;
    margin: 0 auto;
    padding: 10px;
  }

  ion-toolbar {
    --background: transparent;
    --border-width: 0;
    padding: 5px 0;

    ion-back-button {
      --color: white;
      font-weight: 500;
    }

    .next-button {
      --color: white;
      font-weight: 500;

      &[disabled] {
        --color: rgba(255, 255, 255, 0.5);
      }
    }
  }
}

.responsive-container {
  padding: 5px;
}

// Filter Type Section - Compacto
.filter-type-section {
  margin-bottom: 15px;

  .section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
    padding: 0 5px;

    .section-icon {
      font-size: 20px;
      color: white;
    }

    .section-title {
      margin: 0;
      color: white;
      font-size: 18px;
      font-weight: 600;
      flex: 1;
    }

    .status-badge {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 12px;

      ion-icon {
        font-size: 14px;
        margin-right: 4px;
      }

      ion-label {
        font-weight: 500;
      }
    }
  }

  .filter-type-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
    padding: 0 5px;

    .filter-type-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
      min-height: 70px;

      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      }

      &.active {
        background: linear-gradient(135deg, $primary, $secondary);
        border-color: white;
        box-shadow: 0 8px 25px rgba(36, 2, 75, 0.3);

        .card-icon {
          color: white;
          background: rgba(255, 255, 255, 0.2);
        }

        .card-content {
          h3,
          p {
            color: white;
          }
        }

        .active-indicator {
          opacity: 1;
        }
      }

      .card-icon {
        font-size: 32px;
        color: $primary;
        background: rgba(36, 2, 75, 0.1);
        border-radius: 10px;
        padding: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .card-content {
        flex: 1;

        h3 {
          margin: 0 0 2px 0;
          font-size: 15px;
          font-weight: 600;
          color: $primary;
        }

        p {
          margin: 0;
          font-size: 12px;
          color: #666;
        }

        ion-badge {
          margin-top: 4px;
          font-size: 10px;
          padding: 3px 8px;

          ion-icon {
            font-size: 12px;
            margin-right: 3px;
          }
        }
      }

      .active-indicator {
        position: absolute;
        top: 8px;
        right: 8px;
        font-size: 20px;
        color: white;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
    }
  }
}

// Filter Section - Compacto
.filter-section {
  margin-bottom: 15px;

  .section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    padding: 0 5px;

    .section-icon {
      font-size: 18px;
      color: white;
    }

    .section-title {
      margin: 0;
      color: white;
      font-size: 16px;
      font-weight: 600;
    }
  }

  // Filtro de Data Moderno
  .date-filter-modern {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    padding: 16px;
    margin: 0 5px 15px 5px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);

    .date-filter-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 2px solid rgba($primary, 0.1);

      .date-icon {
        font-size: 22px;
        color: $primary;
      }

      .date-filter-title {
        margin: 0;
        font-size: 15px;
        font-weight: 600;
        color: $primary;
      }
    }

    .date-inputs-container {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;

      .date-input-wrapper {
        flex: 1;

        .date-label {
          display: block;
          font-size: 12px;
          font-weight: 500;
          color: $text-secondary;
          margin-bottom: 6px;
          padding-left: 4px;
        }

        .modern-date-input {
          --background: white;
          --border-width: 1.5px;
          --border-color: rgba($primary, 0.2);
          --border-radius: 10px;
          --padding-start: 12px;
          --padding-end: 12px;
          --color: $text-primary !important;
          font-size: 14px;
          height: 42px;
          border: 1.5px solid rgba($primary, 0.2);
          border-radius: 10px;
          transition: all 0.3s ease;

          // Estiliza o input nativo dentro do ion-input
          ::ng-deep input[type="date"] {
            color: $text-primary !important;
            background: white !important;
            width: 100%;
            padding: 8px 12px;
            font-size: 14px;
            border: none;
            outline: none;

            &::-webkit-calendar-picker-indicator {
              cursor: pointer;
              opacity: 1 !important;
              background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 512 512'%3E%3Cpath fill='%2324024b' d='M480,128a64,64,0,0,0-64-64H400V48.45c0-8.61-6.62-16-15.23-16.43A16,16,0,0,0,368,48V64H144V48.45c0-8.61-6.62-16-15.23-16.43A16,16,0,0,0,112,48V64H96a64,64,0,0,0-64,64v12a4,4,0,0,0,4,4H476a4,4,0,0,0,4-4ZM32,196a4,4,0,0,0-4,4V416a64,64,0,0,0,64,64H420a64,64,0,0,0,64-64V200a4,4,0,0,0-4-4Z'/%3E%3C/svg%3E");
              background-size: 20px;
              background-repeat: no-repeat;
              background-position: center;
              width: 30px;
              height: 30px;
              margin-left: 4px;
            }

            &::-webkit-inner-spin-button,
            &::-webkit-clear-button {
              display: none;
            }

            &::-moz-calendar-picker-indicator {
              cursor: pointer;
              opacity: 1 !important;
            }
          }

          &:focus,
          &:focus-within {
            --border-color: $primary;
            border-color: $primary;
            box-shadow: 0 0 0 3px rgba($primary, 0.1);
          }
        }
      }

      .date-separator {
        color: $primary;
        font-size: 18px;
        margin-top: 20px;
        opacity: 0.6;
      }
    }

    .date-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 16px;

      .apply-date-button {
        --border-radius: 10px;
        --padding-top: 12px;
        --padding-bottom: 12px;
        font-weight: 600;
        text-transform: none;
        margin: 0;

        ion-icon {
          font-size: 20px;
        }
      }

      .clear-date-button {
        --color: $danger;
        font-size: 13px;
        margin: 0;
        text-transform: none;

        ion-icon {
          font-size: 18px;
        }
      }
    }
  }

  .search-container {
    padding: 0 5px;

    .custom-searchbar {
      --background: rgba(255, 255, 255, 0.95);
      --border-radius: 10px;
      --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      padding: 0;
      height: 45px;

      &::part(native) {
        padding-left: 12px;
      }
    }
  }
}

// Results Section - Cards Compactos
.results-section {
  margin-bottom: 15px;

  .section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    padding: 0 5px;

    .section-icon {
      font-size: 18px;
      color: white;
    }

    .section-title {
      margin: 0;
      color: white;
      font-size: 16px;
      font-weight: 600;
      flex: 1;
    }

    .results-count {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-weight: 600;
    }
  }

  .client-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 8px;
    padding: 0 5px;

    .client-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      min-height: 70px;

      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      }

      &.selected {
        background: linear-gradient(135deg, #4caf50, #66bb6a);
        border-color: white;

        .client-info {
          .client-avatar .avatar-content {
            background: rgba(255, 255, 255, 0.3);
            color: white;
          }

          .client-details {
            .client-name {
              color: white;
              font-weight: 700;
            }

            .client-metadata {
              span {
                color: rgba(255, 255, 255, 0.95);
                background: rgba(255, 255, 255, 0.2);

                ion-icon {
                  color: white;
                }
              }
            }
          }
        }

        .selected-badge {
          span {
            color: white;
          }
        }
      }

      .client-info {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1;
        min-width: 0;

        .client-avatar {
          .avatar-content {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, $primary, $secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
          }
        }

        .client-details {
          flex: 1;
          min-width: 0;

          .client-name {
            margin: 0 0 4px 0;
            font-size: 13px;
            font-weight: 600;
            color: #2c3e50;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          }

          .client-metadata {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;

            span {
              display: inline-flex;
              align-items: center;
              gap: 3px;
              font-size: 10px;
              color: #666;
              background: rgba(36, 2, 75, 0.1);
              padding: 2px 6px;
              border-radius: 4px;

              ion-icon {
                font-size: 11px;
                color: $primary;
              }
            }
          }
        }
      }

      .add-button {
        flex-shrink: 0;
        font-size: 12px;
        height: 32px;
        --padding-start: 10px;
        --padding-end: 10px;

        ion-icon {
          font-size: 18px;
          margin-right: 4px;
        }
      }

      .remove-button {
        flex-shrink: 0;
        font-size: 12px;
        height: 32px;
        --padding-start: 10px;
        --padding-end: 10px;

        ion-icon {
          font-size: 18px;
          margin-right: 4px;
        }
      }

      .selected-badge {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 11px;
        font-weight: 600;
        color: white;
        flex-shrink: 0;

        ion-icon {
          font-size: 20px;
        }
      }
    }
  }
}

// Company Section - Compacto
.company-section {
  margin-bottom: 15px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 12px;
  padding: 10px;

  .company-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);

    .company-info {
      display: flex;
      align-items: center;
      gap: 10px;

      .company-avatar {
        .avatar-content {
          width: 36px;
          height: 36px;
          border-radius: 8px;
          background: linear-gradient(135deg, $primary, $secondary);
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 700;
          font-size: 12px;
        }
      }

      .company-name {
        margin: 0 0 2px 0;
        font-size: 14px;
        font-weight: 600;
        color: #2c3e50;
      }

      .company-code {
        margin: 0;
        font-size: 11px;
        color: #666;
      }
    }

    ion-badge {
      font-size: 11px;
      padding: 4px 10px;
    }
  }

  .items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 8px;

    .item-card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      transition: all 0.2s ease;

      &:hover {
        border-color: $primary;
        box-shadow: 0 2px 8px rgba(36, 2, 75, 0.15);
      }

      &.selected {
        background: linear-gradient(135deg, $primary, $secondary);
        border-color: $primary;

        .item-info {
          .item-code,
          .item-description {
            color: white;
          }
        }
      }

      .item-info {
        flex: 1;
        min-width: 0;

        .item-code {
          margin: 0 0 2px 0;
          font-size: 12px;
          font-weight: 600;
          color: #2c3e50;
        }

        .item-description {
          margin: 0;
          font-size: 10px;
          color: #666;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
      }

      .item-checkbox {
        margin: 0;
      }
    }
  }
}

// Modal - Compacto
.selected-clients-modal-compact {
  --height: 60%;
  --border-radius: 16px 16px 0 0;

  ion-header {
    ion-toolbar {
      --background: linear-gradient(135deg, $primary, $secondary);
      --color: white;
      padding: 8px 0;

      ion-title {
        font-size: 18px;
        font-weight: 600;
      }

      ion-button {
        --color: white;
        font-weight: 500;
      }
    }
  }

  .selected-summary {
    margin-bottom: 15px;

    .summary-card {
      background: linear-gradient(135deg, $primary, $secondary);
      border-radius: 12px;
      padding: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: white;

      ion-icon {
        font-size: 36px;
      }

      h3 {
        margin: 0 0 3px 0;
        font-size: 20px;
        font-weight: 700;
      }

      p {
        margin: 0;
        font-size: 12px;
        opacity: 0.9;
      }
    }
  }

  .selected-clients-list {
    .form-list {
      background: transparent;

      ion-item-sliding {
        margin-bottom: 8px;

        .selected-client-item {
          --background: white;
          --border-radius: 10px;
          --padding-start: 12px;
          --padding-end: 12px;
          --min-height: 65px;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);

          ion-avatar {
            .selected-avatar {
              width: 40px;
              height: 40px;
              border-radius: 50%;
              background: linear-gradient(135deg, $primary, $secondary);
              color: white;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: 700;
              font-size: 16px;
            }
          }

          ion-label {
            h3 {
              font-size: 13px;
              font-weight: 600;
              color: #2c3e50;
              margin-bottom: 4px;
            }

            p {
              font-size: 11px;
              color: #666;
              margin-bottom: 4px;
            }

            ion-badge {
              font-size: 10px;
              padding: 3px 8px;
            }
          }
        }
      }
    }
  }

  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #999;

    ion-icon {
      font-size: 64px;
      margin-bottom: 12px;
      opacity: 0.5;
    }

    h3 {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 6px 0;
    }

    p {
      font-size: 13px;
      margin: 0;
    }
  }

  .modal-footer {
    padding: 10px;
    background: white;
    border-top: 1px solid #e0e0e0;

    ion-button {
      --border-radius: 8px;
      height: 42px;
      font-weight: 600;
      font-size: 13px;
    }
  }
}

// FAB - Compacto
ion-fab {
  ion-fab-button {
    --background: linear-gradient(135deg, $primary, $secondary);
    --box-shadow: 0 4px 15px rgba(36, 2, 75, 0.4);
    width: 52px;
    height: 52px;

    .fab-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      min-width: 20px;
      height: 20px;
      font-size: 11px;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
  }
}

// Bulk Selector - Compacto
.bulk-selector {
  padding: 0 5px;

  .custom-select {
    --background: rgba(255, 255, 255, 0.95);
    --border-radius: 10px;
    padding: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .helper-text {
    margin: 8px 0 0 0;
    font-size: 11px;
    color: rgba(255, 255, 255, 0.8);
    text-align: center;
  }
}

// Responsive
@media (max-width: 768px) {
  .filter-type-cards,
  .client-list,
  .items-grid {
    grid-template-columns: 1fr;
  }

  .company-section .items-grid {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }
}

// Bulk Selector Modern
.bulk-selector-modern {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16px;
  padding: 20px;
  margin: 16px 0;
  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);

  .selector-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;

    .header-icon {
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);

      ion-icon {
        font-size: 28px;
        color: white;
      }
    }

    .header-text {
      flex: 1;

      h3 {
        margin: 0 0 4px 0;
        font-size: 18px;
        font-weight: 700;
        color: white;
        letter-spacing: -0.5px;
      }

      p {
        margin: 0;
        font-size: 13px;
        color: rgba(255, 255, 255, 0.85);
      }
    }
  }

  .modern-select {
    --background: rgba(255, 255, 255, 0.95);
    --border-radius: 12px;
    --padding-start: 16px;
    --padding-end: 16px;
    --placeholder-color: #666;
    --placeholder-opacity: 1;
    font-weight: 500;
    font-size: 15px;
    min-height: 48px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);

    &::part(icon) {
      color: #667eea;
      opacity: 1;
    }
  }
}

// Alert customization moved to global.scss

// Botão moderno de seleção
.modern-select-button {
  --border-radius: 12px;
  --padding-top: 16px;
  --padding-bottom: 16px;
  --box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
  font-weight: 600;
  text-transform: none;
  margin-top: 8px;
}

// Modal de Seleção em Massa
.selecao-massa-modal {
  --height: 80%;
  --border-radius: 16px 16px 0 0;

  ion-header {
    ion-toolbar {
      --background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --color: white;
      padding: 8px 0;

      ion-title {
        font-size: 18px;
        font-weight: 600;
      }

      ion-button {
        --color: white;
        font-weight: 500;
      }
    }
  }

  .items-selection-list {
    display: flex;
    flex-direction: column;
    gap: 8px;

    .item-selection-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;

      &:active {
        transform: scale(0.98);
      }

      &:hover {
        border-color: #667eea;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        transform: translateY(-2px);
      }

      &.selected {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        border-color: #27ae60;
        box-shadow: 0 6px 15px rgba(39, 174, 96, 0.3);
        transform: translateY(0);

        .item-info-modal {
          h3, p {
            color: white;
          }
        }

        ion-checkbox {
          --background-checked: white;
          --border-color-checked: white;
          --checkmark-color: #27ae60;
        }
      }

      .selected-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        color: white;
        font-size: 24px;
        animation: checkmarkPop 0.3s ease;
      }

      @keyframes checkmarkPop {
        0% {
          transform: scale(0);
          opacity: 0;
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .item-checkbox {
        flex-shrink: 0;

        ion-checkbox {
          --size: 24px;
          --border-width: 2px;
          --border-radius: 6px;
          --border-color: #667eea;
          --background-checked: #667eea;
        }
      }

      .item-info-modal {
        flex: 1;
        min-width: 0;

        h3 {
          margin: 0 0 4px 0;
          font-size: 14px;
          font-weight: 600;
          color: #2c3e50;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        p {
          margin: 0;
          font-size: 12px;
          color: #666;
        }
      }
    }
  }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #999;

    ion-icon {
      font-size: 80px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    h3 {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 8px 0;
    }

    p {
      font-size: 14px;
      margin: 0;
    }
  }

  .modal-footer {
    padding: 12px;
    background: white;
    border-top: 1px solid #e0e0e0;

    ion-button {
      --border-radius: 10px;
      height: 48px;
      font-weight: 600;
      font-size: 15px;
    }
  }
}

// ===========================
// Melhorias de Visibilidade
// ===========================
ion-content {
  ion-list {
    background: transparent;
    padding: 8px 12px;

    ion-item {
      --background: rgba(255, 255, 255, 0.95);
      --border-radius: 12px;
      border-radius: 12px;
      margin-bottom: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      --padding-start: 16px;
      --padding-end: 16px;

      ion-label {
        h3 {
          font-weight: 600;
          color: var(--ion-color-dark);
        }

        p {
          color: var(--ion-color-medium);
        }
      }
    }

    ion-searchbar {
      --background: rgba(255, 255, 255, 0.95);
      --border-radius: 12px;
      --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 0;
    }
  }

  ion-segment {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    padding: 4px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  ion-chip {
    background: rgba(255, 255, 255, 0.95);
    color: var(--ion-color-primary);
    font-weight: 600;
    margin: 8px 12px;
    padding: 8px 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
}

ion-footer {
  ion-list {
    background: white;
    padding: 12px;
    margin: 0;
  }
}
